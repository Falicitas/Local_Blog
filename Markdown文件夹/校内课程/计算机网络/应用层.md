# 应用层

## 应用层的架构

主要有三类：

- Client - Server（C / S）模型：发消息的是客户端，客户端可以与服务端进行通信，而客户端不能与客户端进行通信。服务端IP基本不变。
- Peer - to - peer（P2P）模型：任意节点间可以相互通信。优点是 *高伸缩性* （highly scalable），缺点是 *组织困难* 。
- 混合模型：上述两种模型的混合。

## 主要应用及对应应用层协议

| Application            | Application layer protocol       | Underlying transport protocol |
| ---------------------- | -------------------------------- | ----------------------------- |
| e-mail                 | SMTP                             | TCP                           |
| remote terminal access | Telnet                           | TCP                           |
| Web                    | HTTP                             | TCP                           |
| file transfer          | FTP                              | TCP                           |
| streaming multimedia   | HTTP / RTP                       | TCP or UDP                    |
| Internet telephony     | SIP, RTP, proprietary(e.g Skype) | typically UDP                 |

## Web和HTTP

在服务端，存储着Web页。Web页包含若干对象，包括 HTML file, JPEG image, Java applet, audio file等。其中存在一个 **基础HTML file** ，包括了被提及的对象。每个对象由一个 **URL** 定位。

HTTP 共两个过程：请求（request）和响应（response）。

端口为80。

### Non-persistent HTTP

当建立一次 TCP 连接，下载了HTML file，然后确定了下载对象个数后，一次仅能传输一个对象。

设单个对象的传输时间为 total = 2RTT + transmit time ，那么非持续HTTP对于 S 个object需要 S * total 的时间。

### Persistent HTTP

建立一次 TCP 连接，当HTML file确定好对象个数，一次传完所有对象。

## Sockets

![cookies运行机制](C:\Users\Administrator\Desktop\markdown图片\计算机网络\cookies运行机制.png)





![image-20210320093607353](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210320093607353.png)

关于课本第一章的复习题第19题b.问，如果采用存储转发分组交换方式，时间应该是 ：$L = 4MB = 32 * 10^6b,t = \frac{L}{R_1} + \frac{L}{R_2} + \frac{L}{R_3} = 32 * 10^6(\frac{1}{500*10^3}+\frac{1}{2000*10^3}+\frac{1}{1000*10^3}) = 112s$ 。而答案是 $\frac{L}{吞吐量} = 32s$ 。这个 R 值不是传输速率嘛？

