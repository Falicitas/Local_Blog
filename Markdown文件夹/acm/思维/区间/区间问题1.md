# 区间问题1

## 一些习题

### CF1438B Valerii Against Everyone

给个a数组，b数组的定义$b_i = 2^{a_i}$。问是否存在一对不相交区间$[l_1,r_1],[l_2,r_2]$使$\sum_{i=l_1}^{r_1} b_i = \sum_{i=l_2}^{r_2}b_i$。

首先从特殊可解情况出发，即只要区间有两个数相等就满足条件。

那如果不存在？以二进制的角度，任意区间的元素取 或 等于区间元素和，故此时任意两不相交区间取 与 为0，故无解。

### CF1438E Yurii Can Do Everything

给一个序列，问序列满足$a_l \oplus a_r = \sum\limits_{i=l+1}^{r-1}a_i$的子区间$[l,r]$个数。

有着相当优雅结论的暴力题啊。想象给题目给的限制，其实是十分严苛的，基本没几个区间能满足。枚举$l$，设$a_l$的最高位为$k$。对于两个数异或不可能超过两个最高位取最大那个的两倍（即不会出现更高的位）而对于左端点$a_l$来说，中间元素的sum一旦超过$2^{k+1}-1$，则后面的区间必不满足条件。枚举左区间扫一遍，再枚举右区间扫一遍（由于有些合法的区间会被中间元素的sum截断），最后去重。

复杂度$O(n \log(\max\{a_i\}))$的证明：对于作为右端点的点$a_i$，只会被任意一种左端点最高位的k至多扫过2次，即一个点最多会被遍历$O(\log \max\{a_i\})$次。故总复杂度为$O(n \log(\max\{a_i\}))$。

### CF1443F Identify the Operations

放在F唬人的题。

必定是顺序取数。当取数的时候旁边的点得是无标记的。不管取左边去右边，最后都是少一个无标记，又多回一个无标记的（当前数由有标记变为无标记）发现以当前数为中心的三个数的标记关系不改变。只要每次取xx数，旁边有无标记的就贡献对应权值，然后将自己的位置标记为0就行。

### CF1436E Complicated Computations

求子区间mex集的mex。

一个区间数的mex=x，那么x一定不在该区间里。那么枚举每个x，对于每个x的间隙$[l,r]$去确定该区间里的数的mex是否为x。套个莫队求mex就行，总询问区间O(n)。

